<!DOCTYPE html>
<html lang="uk">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Вітання та демографія</title>
    <link rel="stylesheet" href="src/css/style.css">
  </head>
  <body>
    <div class="container">
      <header>
        <h1>Ласкаво просимо до нашого опитування!</h1>
      </header>
      <main>
        <form id="demographicsForm" netlify>
          <!-- Поле для імені видалено -->
          <div class="form-group">
            <label for="gender">Стать:</label>
            <select id="gender" name="gender" required>
              <option value="" disabled selected>Оберіть стать</option>
              <option value="male">Чоловіча</option>
              <option value="female">Жіноча</option>
            </select>
          </div>
          <div class="form-group">
            <label for="ageGroup">Вікова група:</label>
            <select id="ageGroup" name="ageGroup" required>
              <option value="" disabled selected>Оберіть вікову групу</option>
              <option value="under18">Менше 18</option>
              <option value="18-24">18-24</option>
              <option value="25-34">25-34</option>
              <option value="35-44">35-44</option>
              <option value="45-54">45-54</option>
              <option value="55-64">55-64</option>
              <option value="65plus">65 і старші</option>
            </select>
          </div>
          <button type="button" class="btn submit-btn" onclick="saveAndContinue()" disabled>Почати опитування</button>
        </form>
      </main>
    </div>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        const form = document.getElementById('demographicsForm');
        const submitButton = document.querySelector('.submit-btn');
        const genderSelect = document.getElementById('gender');
        const ageGroupSelect = document.getElementById('ageGroup');
        // Функція для оновлення статусу кнопки в залежності від наявності даних
        function updateButtonStatus() {
          const isGenderSelected = genderSelect.value;
          const isAgeGroupSelected = ageGroupSelect.value;
          submitButton.disabled = !(isGenderSelected && isAgeGroupSelected);
        }
        // Встановлення значень виборів з localStorage, якщо такі є
        const savedDemographics = JSON.parse(localStorage.getItem('demographics'));
        if (savedDemographics) {
          if (savedDemographics.gender) {
            genderSelect.value = savedDemographics.gender;
          }
          if (savedDemographics.ageGroup) {
            ageGroupSelect.value = savedDemographics.ageGroup;
          }
        }
        // Додаємо обробники подій для вибору статі та вікової групи
        [genderSelect, ageGroupSelect].forEach(input => {
          input.addEventListener('change', updateButtonStatus);
          input.addEventListener('input', updateButtonStatus);
        });
        // Логіка кнопки "Почати опитування"
        window.saveAndContinue = function() {
          const gender = genderSelect.value;
          const ageGroup = ageGroupSelect.value;
          if (!gender || !ageGroup) {
            alert('Будь ласка, заповніть усі поля.');
            return;
          }
          // Збереження демографічних даних
          const demographics = {
            gender,
            ageGroup
          };
          localStorage.setItem('demographics', JSON.stringify(demographics));
          window.location.href = 'src/pages/category1.html';
        };
        // Оновлюємо стан кнопки при завантаженні сторінки
        updateButtonStatus();
      });
    </script>
  </body>
</html>